#!/bin/bash

YELLOW='\033[1;33m'
RED='\033[0;31m'
NC='\033[0m'

echo ""
echo -e "${YELLOW}---------------------${NC}"
echo -e "${YELLOW}RECTANGULAR INSTALLER${NC}"
echo -e "${YELLOW}---------------------${NC}"

echo ""
echo -e "prompt: ${RED}What is your project's name?${NC}"

read projectName

echo ""
echo -e "prompt: ${RED}Please describe your project${NC}"

read projectDescription

echo ""
echo -e "${YELLOW}Installing $projectName...${NC}"

mkdir $projectName
cd $projectName

. ~/.nvm/nvm.sh
curl -o --silent package.js https://raw.githubusercontent.com/abbotto/rectangular/master/install/package.js > /dev/null
curl -o --silent package.json https://raw.githubusercontent.com/abbotto/rectangular/master/install/project/package.json > /dev/null
node package.js "$projectName" "$projectDescription"
rm package.js

npm i https://github.com/abbotto/rectangular.git > /dev/null

mkdir node_modules/rectangular/tmp && mkdir node_modules/rectangular/tmp/project
cp -R node_modules/rectangular/install/project/ node_modules/rectangular/tmp/project
cp package.json node_modules/rectangular/tmp/project/

cd node_modules/rectangular/
nvm use
npm i
node install/extra.js
cd ../../

cp -R node_modules/rectangular/tmp/project/ .
npm run setup

echo ""
echo -e "${YELLOW}Finished. Thank you for choosing Rectangular.${NC}"
