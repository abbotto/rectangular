function define(t){Object.defineProperty(t,"length",{configurable:!0,enumerable:!1,get:function(){return this.store.size}}),Object.defineProperty(t,instance,{configurable:!0,enumerable:!1,value:function(e,r){return e&&(Object.prototype.isPrototypeOf.call(e,t)||!!e.className||!!e.parent||!!e.store)}})}function isMergeableObj(t){return pureObj(t)&&!["[object RegExp]","[object Date]"].includes(toS(t))}function emptyTarget(t){return array(t)?[]:{}}function cloneIfNeeded(t,e){return!0===e.clone&&isMergeableObj(t)?deepmerge(emptyTarget(t),t,e):t}function defaultArrayMerge(t,e,r){var n=t.slice();return e.forEach(function(e,o){void 0===n[o]?n[o]=cloneIfNeeded(e,r):isMergeableObj(e)?n[o]=deepmerge(t[o],e,r):-1===t.indexOf(e)&&n.push(cloneIfNeeded(e,r))}),n}function mergeObj(t,e,r){var n={};return isMergeableObj(t)&&Object.keys(t).forEach(function(e){n[e]=cloneIfNeeded(t[e],r)}),Object.keys(e).forEach(function(o){isMergeableObj(e[o])&&t[o]?n[o]=deepmerge(t[o],e[o],r):n[o]=cloneIfNeeded(e[o],r)}),n}function deepmerge(t,e,r){if(array(e)){var n=r.arrayMerge;return array(t)?n(t,e,r):cloneIfNeeded(e,r)}return mergeObj(t,e,r)}function eqq(t,e){return t[0]===e[0]&&t[1]===e[1]}function eqCurry(t){return eqq.bind(null,t)}function getDefaults(){return{arrayMerge:defaultArrayMerge,stringToArray:!0,boolToArray:!1,boolAsRight:!0,ignoreTypes:["null","undefined","NaN"],debug:!0}}function dopemerge(t,e,r){if(void 0===r&&(r={}),t===e)return t;var n=Object.assign(getDefaults(),r),o=n.ignoreTypes,i=n.stringToArray,s=n.boolToArray,a=n.clone,u=[ezType(t),ezType(e)];if(!0===o.includes(u[0]))return e;if(!0===o.includes(u[1]))return t;var c=eqCurry(u);switch(!0){case c(["boolean","boolean"]):return s?[t,e]:e;case c(["string","string"]):return i?[t,e]:t+e;case c(["array","string"]):return(a?t.slice(0):t).concat([e]);case c(["string","array"]):return(a?e.slice(0):e).concat([t]);default:return deepmerge(t,e,n)}}function Traverse(t){this.value=t}function walk(t,e,r){var n=[],o=[],i=!0;return function t(s){function a(){if(pureObj(p.node)){p.keys&&p.node_===p.node||(p.keys=objectKeys(p.node)),p.isLeaf=0==p.keys.length;for(var t=0;t<o.length;t++)if(o[t].node_===s){p.circular=o[t];break}}else p.isLeaf=!0,p.keys=null;p.notLeaf=!p.isLeaf,p.notRoot=!p.isRoot}var u={},c=!0,p={node:r?copy(s):s,node_:s,path:[].concat(n),parent:o[o.length-1],parents:o,key:n.slice(-1)[0],isRoot:0===n.length,level:n.length,circular:null,update:function(t,e){p.isRoot||(p.parent.node[p.key]=t),p.node=t,e&&(c=!1)},delete:function(t){delete p.parent.node[p.key],t&&(c=!1)},remove:function(t){void 0!==p.parent&&(isArray$1(p.parent.node)?p.parent.node.splice(p.key,1):delete p.parent.node[p.key],t&&(c=!1))},keys:null,before:function(t){u.before=t},after:function(t){u.after=t},pre:function(t){u.pre=t},post:function(t){u.post=t},stop:function(){i=!1},block:function(){c=!1}};if(!i)return p;a();var f=e.call(p,p.node);return void 0!==f&&p.update&&p.update(f),u.before&&u.before.call(p,p.node),c?(pureObj(p.node)&&!p.circular&&(o.push(p),a(),forEach(p.keys,function(e,o){n.push(e),u.pre&&u.pre.call(p,p.node[e],e);var i=t(p.node[e]);r&&hasOwnProperty(p.node,e)&&(p.node[e]=i.node),i.isLast=o==p.keys.length-1,i.isFirst=0==o,u.post&&u.post.call(p,i),n.pop()}),o.pop()),u.after&&u.after.call(p,p.node),p):p}(t).node}function copy(t){if(pureObj(t)){var e;if(isArray$1(t))e=[];else if(date(t))e=new Date(t.getTime?t.getTime():t);else if(regexp(t))e=new RegExp(t);else if(error$1(t))e={message:t.message};else if(boolean_1(t))e=new Boolean(t);else if(number(t))e=new Number(t);else if(string(t))e=new String(t);else if(Object.create&&Object.getPrototypeOf)e=Object.create(Object.getPrototypeOf(t));else if(t.constructor===Object)e={};else{var r=t.constructor&&t.constructor.prototype||t.__proto__||{},n=function(){};n.prototype=r,e=new n}return forEach(objectKeys(t),function(r){e[r]=t[r]}),e}return t}function getDecoration(t){var e=pureObj(t)?Object.keys(t).pop():t.method||t;return{method:e,returnee:t.return,key:t.key||e,cb:pureObj(t)?t[e]:null}}function compose(t,e){void 0===t&&(t=ChainedMap_1),void 0===e&&(e=!0);var r=t,n=e;return!0===n?"object"==typeof r&&!1===_class(r)?(n=r,r=ChainedMap_1):n={symbols:!0,define:!0,observe:!0,shorthands:!0,transform:!0,types:!0,dot:!0,extend:!0}:n={},!0===n.extend&&(r=Extend(r)),!0===n.define&&(r=Define(r)),!0===n.observe&&(r=Observe_1(r)),!0===n.shorthands&&(r=Shorthands_1(r)),!0===n.transform&&(r=Transform_1(r)),!0===n.types&&(r=Types(r)),!0===n.dot&&(r=DotProp_1(r)),r}var iterator=Symbol.iterator,instance=Symbol.hasInstance,primative=Symbol.toPrimitive,F=Function.prototype,Chainable=function(t){t&&(this.parent=t),this.className=this.constructor.name};Chainable.prototype[iterator]=function(){var t=!!this.entries&&this.entries(),e=this.values(),r=this.store.size,n=!1===t?new Array(r):Object.keys(t);return{i:0,next:function(){var o=this.i,i=o,s=e[o];return t&&(i=n[o]),void 0===i&&void 0===s||r<=o?{value:void 0,done:!0}:(this.i++,{value:[i,s],done:!1})}}},Chainable.prototype[instance]=function(t){return Chainable[instance](t,this)},Chainable.prototype.end=function(){return this.parent},Chainable.prototype.when=function(t,e,r){return void 0===e&&(e=F),void 0===r&&(r=F),t?e(this):r(this),this},Chainable.prototype.clear=function(){return this.store.clear(),this},Chainable.prototype.delete=function(t){return this.store.delete(t),this},Chainable.prototype.has=function(t){return this.store.has(t)},Chainable.prototype.values=function(){var t=[];return this.store.forEach(function(e){return t.push(e)}),t},Chainable.prototype[primative]=function(t){var e=this;if("number"===t&&this.toNumber)return this.toNumber();if("string"===t&&this.toString)return this.toString();if(void 0!==this.getContents){var r=this.getContents();if("string"==typeof r)return r}for(var n=["toPrimative","toNumber","toArray","toJSON","toBoolean","toObject"],o=0;o<n.length;o++)if(void 0!==e[n[o]])return e[n[o]](t);return this.toString()},define(Chainable),define(Chainable.prototype);var Chainable_1=Chainable,pureObj=function(t){return null!==t&&"object"==typeof t},array=Array.isArray,toS=function(t){return Object.prototype.toString.call(t)},ezType=function(t){return array(t)?"array":typeof t},dopemerge_1=dopemerge,_function=function(t){return"function"==typeof t},MergeChain=function(t){function e(e){var r=this;t.call(this,e),this.store=new Map,this.set=function(t,e){return r.store.set(t,e),r},this.set("onValue",function(){return!0}).set("merger",dopemerge_1),this.get=function(t){return r.store.get(t)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.init=function(t){return new e(t)},e.prototype.onExisting=function(t){return this.set("onExisting",t)},e.prototype.onValue=function(t){return this.set("onValue",t)},e.prototype.obj=function(t){return this.set("obj",t)},e.prototype.merger=function(t){return _function(t)?this.set("merger",t):this.set("opts",t)},e.prototype.merge=function(e){for(var r=this,n=this.get("onExisting"),o=this.get("onValue"),i=this.get("opts")||{},s=!0!==this.has("obj")||e?e||{}:this.get("obj"),a=this.get("merger"),u=this.parent.shorthands||[],c=Object.keys(s),p=0,f=c.length;p<f;p++){var h=c[p],l=s[h],d=r.parent[h];o(l,h,r)&&(d instanceof t?r.parent[h].merge(l):d||u.includes(h)?function(t,e){var o=_function(r.parent[t]),s=function(t,e){return o?r.parent[t](e):r.parent.set(t,e)};if(!0===r.parent.has(t)){var u=r.parent.get(t);void 0===n?s(t,a(u,e,i)):s(t,n(u,e,i))}else s(t,e)}(h,l):r.parent.set(h,l))}return this.parent},e}(Chainable_1),MergeChain_1=MergeChain,reduce=function(t){var e=Array.from(t.entries()),r={};return 0!==e.length&&(r=e.reduce(function(t,e){var r=e[0],n=e[1];return t[r]=n,t},{})),r},objWithKeys=function(t){return toS(t)&&0===Object.keys(t).length},map=function(t){return t instanceof Map||"[object Map]"===toS(t)},real=function(t){return null!==t&&void 0!==t&&!isNaN(t)},ignored=function(t){return"inspect"===t||"parent"===t||"store"===t||"shorthands"===t||"decorated"===t||"className"===t},isMapish=function(t){return t&&(t instanceof Chainable_1||map(t))},ChainedMap=function(t){function e(e){t.call(this,e),this.shorthands=[],this.store=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.tap=function(t,e){var r=e(this.get(t),dopemerge_1);return this.set(t,r)},e.prototype.from=function(t){var e=this;return Object.keys(t).forEach(function(r){var n=t[r];return e[r]&&e[r].merge?e[r].merge(n):_function(e[r])?e[r](n):e.set(r,n)}),this},e.prototype.extend=function(t){var e=this;return t.forEach(function(t){e.shorthands.push(t),e[t]=function(r){return e.set(t,r)}}),this},e.prototype.clear=function(){var t=this;return this.store.clear(),Object.keys(this).forEach(function(e){ignored(e)||isMapish(t[e])&&t[e].clear()}),this},e.prototype.entries=function(t){void 0===t&&(t=!1);var e=reduce(this.store);if(!1===t)return e;var r=function(t){return Object.keys(t).forEach(function(r){if(!ignored(r)){var n=t[r];if(n&&_function(n.entries)){Object.assign(e,(o={},o[r]=n.entries(!0)||{},o));var o}}}),{add:r,reduced:e}};return r(this).add(e).reduced},e.prototype.get=function(t){return this.store.get(t)},e.prototype.set=function(t,e){return this.store.set(t,e),this},e.prototype.merge=function(t,e){void 0===e&&(e=null);var r=MergeChain_1.init(this);return null===e?r.merge(t):e(r.obj(t)),this},e.prototype.clean=function(t){return Object.keys(t).reduce(function(e,r){var n=t[r];return real(n)?array(n)&&!n.length?e:objWithKeys(n)?e:(e[r]=n,e):e},{})},e}(Chainable_1),ChainedMap_1=ChainedMap,toArr=function(t){if(!t)return[];if(Array.isArray(t))return t;if("string"==typeof t)return t.includes(",")?t.split(","):[t];if(t instanceof Set||t instanceof Map||t.values){var e=[];return t.values().forEach(function(t){return e.push(t)}),e}return[t]},species=Symbol.species,spreadable=Symbol.isConcatSpreadable,ChainedSet=function(t){function e(e){t.call(this,e),this.store=new Set}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.add=function(t){return this.store.add(t),this},e.prototype.prepend=function(e){return this.store=new Set([e].concat(t.prototype.values.call(this))),this},e.prototype.merge=function(t){var e=this;return toArr(t).forEach(function(t){return e.store.add(t)}),this},e}(Chainable_1),d=function(t){return function(e){return function(r){return t.map(function(t){return Object.defineProperty(t,e,{configurable:!0,enumerable:!1,get:function(){return r}})})}}},set=d([ChainedSet.prototype,ChainedSet]);set(species)(Set),set(spreadable)(!0);var ChainedSet_1=ChainedSet,regexp=function(t){return t instanceof RegExp||"[object RegExp]"===toS(t)},error$1=function(t){return t instanceof Error||"[object Error]"===toS(t)},boolean_1=function(t){return!0===t||!1===t||"[object Boolean]"===toS(t)},number=function(t){return"[object Number]"===toS(t)||/^0x[0-9a-f]+$/i.test(t)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)},string=function(t){return"string"==typeof t||"[object String]"===toS(t)},date=function(t){return t instanceof Date||"[object Date]"===toS(t)},isArray$1=Array.isArray,objectKeys=Object.keys,hasOwnProperty=function(t,e){return Object.hasOwnProperty.call(t,e)},traverse=function(t){return new Traverse(t)},traverse_1=traverse;Traverse.prototype.get=function(t){for(var e=this.value,r=0;r<t.length;r++){var n=t[r];if(!e||!hasOwnProperty(e,n)){e=void 0;break}e=e[n]}return e},Traverse.prototype.has=function(t){for(var e=this.value,r=0;r<t.length;r++){var n=t[r];if(!e||!hasOwnProperty(e,n))return!1;e=e[n]}return!0},Traverse.prototype.set=function(t,e){for(var r=this.value,n=0;n<t.length-1;n++){var o=t[n];hasOwnProperty(r,o)||(r[o]={}),r=r[o]}return r[t[n]]=e,e},Traverse.prototype.map=function(t){return walk(this.value,t,!0)},Traverse.prototype.forEach=function(t){return this.value=walk(this.value,t,!1),this.value},Traverse.prototype.reduce=function(t,e){var r=1===arguments.length,n=r?this.value:e;return this.forEach(function(e){this.isRoot&&r||(n=t.call(this,n,e))}),n},Traverse.prototype.paths=function(){var t=[];return this.forEach(function(e){t.push(this.path)}),t},Traverse.prototype.nodes=function(){var t=[];return this.forEach(function(e){t.push(this.node)}),t},Traverse.prototype.clone=function(){var t=[],e=[];return function r(n){for(var o=0;o<t.length;o++)if(t[o]===n)return e[o];if(pureObj(n)){var i=copy(n);return t.push(n),e.push(i),forEach(objectKeys(n),function(t){i[t]=r(n[t])}),t.pop(),e.pop(),i}return n}(this.value)};var forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var r=0;r<t.length;r++)e(t[r],r,t)};forEach(objectKeys(Traverse.prototype),function(t){traverse[t]=function(e){var r=[].slice.call(arguments,1),n=new Traverse(e);return n[t].apply(n,r)}});var _class=function(t){return/^\s*class\s/.test(t.toString())},camelCase=function(t){return t.replace(/\s+/g,"_").replace(/[_.-](\w|$)/g,function(t,e){return e.toUpperCase()})},index$4={Iterator:Symbol.iterator,Primative:Symbol.toPrimitive,Instance:Symbol.hasInstance,Spreadable:Symbol.isConcatSpreadable,Species:Symbol.species},Primative$1=index$4.Primative,OFF="536870872@@",Define=function(t,e){return void 0===t&&(t=ChainedMap_1),function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.defineGetSet=function(t){var e=this;return t.forEach(function(t){var r=e[t]&&e[t].bind?e[t].bind(e):e[t],n=function(){return r()},o=function(t){return void 0===t&&(t=OFF),t===OFF?n():r(t)};Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:n,set:o})}),this},e.prototype.extendGetSet=function(t,e){var r=this;return t.forEach(function(t){var e,n,o="string"==typeof t?t:t.name;e=t.get?function(e){return t.get(e)}:function(t){return r.get(o)};var i=t.set?function(e,r,n){return t.set(e,r,n)}:function(t){return r.set(o,t)};n=function(t,r,n){return void 0===t&&(t=OFF),t===OFF?e():i(t,r,n)},r[camelCase("get-"+o)]=e,r[camelCase("set-"+o)]=n,r.shorthands.push(o),Object.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(t){var r=function(t){return void 0===t&&(t=OFF),n(t)};return r[Primative$1]=function(t){return e(OFF)},r.valueOf=function(){return e(OFF)},r},set:function(t,e,r){return void 0===t&&(t=OFF),void 0===e&&(e=OFF),void 0===r&&(r=OFF),n(t,e,r)}})}),this},e}(t)},eq=function(t,e,r){void 0===r&&(r=!1);var n=!0,o=e;return traverse_1(t).forEach(function(t){var i=function(){n=!1};if(!this.isRoot){if("object"!=typeof o)return i();o=o[this.key]}var s=o;this.post(function(){o=s});var a=function(t){return Object.prototype.toString.call(t)};if(this.circular)traverse_1(e).get(this.circular.path)!==s&&i();else if(typeof s!=typeof t)!0===r&&s==t||i();else if(null===s||null===t||void 0===s||void 0===t)s!==t&&i();else if(s.__proto__!==t.__proto__)i();else if(s===t);else if("function"==typeof s)s instanceof RegExp?s.toString()!=t.toString()&&i():s!==t&&i();else if("object"==typeof s)if("[object Arguments]"===a(t)||"[object Arguments]"===a(s))a(s)!==a(t)&&i();else if("[object RegExp]"===a(t)||"[object RegExp]"===a(s))s&&t&&s.toString()===t.toString()||i();else if(s instanceof Date||t instanceof Date)s instanceof Date&&t instanceof Date&&s.getTime()===t.getTime()||i();else{var u=Object.keys(s),c=Object.keys(t);if(u.length!==c.length)return i();for(var p=0;p<u.length;p++){var f=u[p];Object.hasOwnProperty.call(t,f)||i()}}}),n},objs={},Observe_1=function(t,e){return void 0===t&&(t=ChainedMap_1),function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.observe=function(t,e){var r=this;return void 0===this.observers&&(this.observers=new ChainedSet_1(this)),this.observers.add(function(n){var o={},i=toArr(t);if(i.includes("*"))o=r.entries();else for(var s=0;s<i.length;s++)o[i[s]]=r.get(i[s]);var a=i.join("_");if(eq(objs[a],o))return r;objs[a]=traverse_1(o).clone(),e(o,r)}),this},e}(t)},encase=function(t){return function(e,r,n,o,i){var s,a=t.onValid,u=t.onInvalid,c=t.ref,p=t.rethrow;try{return s=c(e,r,n,o,i),0===a?s:a(s)}catch(t){if(0!==u)return u(t);if(!0===p)throw t;return i}}},Shorthands_1=function(t,e){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.encase=function(t,e){var r=this;void 0===e&&(e=!1);var n={onInvalid:0,onValid:0,rethrow:e,ref:this[t].bind(this)};return this.then=function(t){return n.onValid=t,r},this.catch=function(t){return n.onInvalid=t,r},this[t]=encase(n),this},e.prototype.bindMethods=function(t){var e=this;return t.forEach(function(t){return e[t]=e[t].bind(e)}),this},e.prototype.chainWrap=function(t,e){var r=this;void 0===e&&(e=null);var n=e||this[t];return this[t]=function(t,e,o){return n.call(r,t,e,o),r},this},e.prototype.setIfEmpty=function(t,e){return!1===this.has("name")&&this.set(t,e),this},e.prototype.return=function(t){return t},e.prototype.wrap=function(t){return"function"==typeof t&&t.call(this,this),this},e}(t)},escapeStringRegex=function(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},toTest=function(t,e,r){var n=typeof t;return"string"===n?!!new RegExp(escapeStringRegex(t)).test(e):"function"!==n||t.test?!!t.test(e,r):!!t(e)},TraverseChain=function(t){function e(e){t.call(this,e),this.set("keys",[]).set("vals",[]),this.call=this.traverse.bind(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.obj=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),t?this.set("obj",t):this},e.prototype.keys=function(t){return this.set("keys",t)},e.prototype.vals=function(t){return this.set("vals",t)},e.prototype.onMatch=function(t){return void 0===t&&(t=null),null===t?this.set("onMatch",function(t,e){e.remove()}):this.set("onMatch",t)},e.prototype.onNonMatch=function(t){return void 0===t&&(t=null),this.set("onNonMatch",t)},e.prototype.traverse=function(t){!1===this.has("onMatch")&&this.onMatch();var e=this.entries(),r=e.obj,n=e.keys,o=e.vals,i=e.onMatch,s=e.onNonMatch,a=r,u=function(t,e){for(var r=0;r<n.length;r++)if(toTest(n[r],t,e))return!0;for(var i=0;i<o.length;i++)if(toTest(o[i],e,t))return!0;return!1};return traverse_1(r).forEach(function(t){u(this.key,t)?i(t,this):s&&s(t,this)}),this.set("traversed",a),!0===t?a:this},e.prototype.traversed=function(){return this.get("traversed")},e}(ChainedMap_1),obj=function(t){return pureObj(t)||"function"==typeof t},Transform_1=function(t,e){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.traverse=function(t){return void 0===t&&(t=!1),new TraverseChain(this).obj(!1===t?this.entries(!0):!0===t?this:t)},e.prototype.transform=function(t,e){return void 0===this.transformers&&(this.transformers={}),this.transformers[t]?this.transformers[t].push(e):this.transformers[t]=[e],this},e.prototype.compute=function(t,e){var r=this;return this.transform(t,function(t){return e(t,r),t})},e.prototype.set=function(e,r){var n=this,o=r,i=e;if(void 0!==this.transformers&&void 0!==this.transformers[i])for(var s=0;s<this.transformers[i].length;s++)o=n.transformers[i][s].call(n,o,n);return t.prototype.set.call(this,i,o),void 0!==this.observers&&this.observers.values().forEach(function(t){return t({key:i,value:o})}),this},e.prototype.remap=function(t,e){var r=this,n=t;return obj(t)||(n={},n[t]=e),Object.keys(n).forEach(function(t){return r.transform(t,function(e){return r.set(n[t],e),e})}),this},e}(t)},Types=function(t,e){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.validators=function(t){return this.set("validators",!0===this.has("validators")?dopemerge_1(this.get("validators"),t):t)},e.prototype.typed=function(t){var e=this;void 0===t&&(t=null);var r=new FactoryChain_1(this),n=r.prop("type").prop("name").prop("onInvalid").prop("onValid").chainUpDown(this.typed).chainUpDowns(["typed"]).onDone(function(t){e.extendTyped(t.name,t.type,t.onInvalid,t.onValid)});return string(t)?(n.name(t),n):pureObj(t)?n.merge(t).end():n},e.prototype.extendTyped=function(t,e,r,n){var o=this;return void 0===r&&(r=null),void 0===n&&(n=null),this[t]=function(i){var s=function(){var r="[typof: "+typeof t+", name: "+t+"] was not of type "+e;return new TypeError(r)};null===r&&(r=function(t){throw s()});var a="string"==typeof e?o.get("validators")[e]:e;if("function"!=typeof a)throw new TypeError(a+" for "+e+" was not a function");var u=!0;return u=a(i),null===u||!0===u?(o.set(t,i),null!==n&&n(i,o,s())):r(i,o),o},this},e}(t)},dotSegments=function(t){for(var e=t.split("."),r=[],n=0;n<e.length;n++){for(var o=e[n];"\\"===o[o.length-1]&&void 0!==e[n+1];)o=o.slice(0,-1)+".",o+=e[++n];r.push(o)}return r},dotProp={get:function(t,e,r){if(!obj(t)||"string"!=typeof e)return void 0===r?t:r;for(var n=dotSegments(e),o=0;o<n.length;o++){if(!Object.prototype.propertyIsEnumerable.call(t,n[o]))return r;if(void 0===(t=t[n[o]])||null===t){if(o!==n.length-1)return r;break}}return t},set:function(t,e,r){if(!obj(t)||"string"!=typeof e)return t;for(var n=dotSegments(e),o=0;o<n.length;o++){var i=n[o];obj(t[i])||(t[i]={}),o===n.length-1&&(t[i]=r),t=t[i]}},delete:function(t,e){if(!obj(t)||"string"!=typeof e)return t;for(var r=dotSegments(e),n=0;n<r.length;n++){var o=r[n];if(n===r.length-1)return void delete t[o];if(t=t[o],!obj(t))return}},has:function(t,e){if(!obj(t)||"string"!=typeof e)return!1;for(var r=dotSegments(e),n=0;n<r.length;n++){if(!obj(t))return!1;if(!(r[n]in t))return!1;t=t[r[n]]}return!0}},dot=function(t){return"string"==typeof t&&t.includes(".")},shouldDot=function(t,e){return!1!==e._dot&&dot(t)},DotProp_1=function(t,e){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dot=function(t){return void 0===t&&(t=!0),this._dot=t,this},e.prototype.set=function(e,r){if(shouldDot(e,this)){var n=e.split(".").shift();t.prototype.has.call(this,n)||t.prototype.set.call(this,n,{});var o=t.prototype.entries.call(this);return dotProp.set(o,e,r),t.prototype.set.call(this,n,o[n])}return t.prototype.set.call(this,e,r)},e.prototype.get=function(e){return shouldDot(e,this)?dotProp.get(t.prototype.entries.call(this),e):t.prototype.get.call(this,e)},e.prototype.has=function(e){return shouldDot(e,this)?dotProp.has(t.prototype.entries.call(this),e):t.prototype.has.call(this,e)},e.prototype.delete=function(e){return shouldDot(e,this)?dotProp.delete(t.prototype.entries.call(this),e):t.prototype.delete.call(this,e)},e.prototype.dotter=function(t){var e=this;return void 0===t&&(t=null),null!==t?this._dotter(t):{name:function(t){return e._dotter(t)}}},e.prototype._dotter=function(t){var e,r={},n=dot(t),o=!!n&&dotSegments(t),i=!!o&&o.shift();return r.dotted=function(s){return!1===n?r:(e=s(i,o,t),r)},r.otherwise=function(o){return!0===n?r:(e=o(t),r)},r.dotted.otherwise=r.otherwise,r.value=function(){return e},r},e}(t)},Extend=function(t,e){return void 0===t&&(t=ChainedMap_1),function(t){function e(e){t.call(this,e),e&&e.has&&e.has("debug")?this._debug=e.get("debug"):this.debug(!1)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(e){return"debug"===e?this._debug:t.prototype.get.call(this,e)},e.prototype.debug=function(t){return void 0===t&&(t=!0),this._debug=t,this},e.prototype.decorateParent=function(t){var e=this;return this.parent&&!this.parent.decorated&&(this.parent.decorated=this.parent.decorated||[]),t.forEach(function(t){var r=getDecoration(t),n=r.method,o=r.cb,i=r.returnee,s=r.key;(i||e.parent)&&(e.parent.decorated.push(n),e.parent[n]=function(t,r,a){var u;return(o=o||e[n])?u=o.call(e,t,r,a):e.set(s,t),i||u||e.parent||e})}),this},e.prototype.extendAlias=function(t,e,r){var n=this;return void 0===r&&(r=null),toArr(t).forEach(function(t){return n[t]=n[e].bind(r||n)}),this},e.prototype.extendWith=function(t,e){var r=this;void 0===e&&(e=void 0);var n=Array.isArray(t);return(n?t:Object.keys(t)).forEach(function(o){r.shorthands.push(o);var i=!1===n?t[o]:e;r[o]=function(t){return void 0===t&&(t=i),r.set(o,t)}}),this},e.prototype.extendIncrement=function(t){var e=this;return t.forEach(function(t){e.shorthands.push(t),e[t]=function(){var r=(e.get(t)||0)+1;return e.set(t,r),e}}),this},e}(t)};compose.Extend=Extend,compose.Define=Define,compose.Observe=Observe_1,compose.Shorthands=Shorthands_1,compose.Transform=Transform_1,compose.Types=Types,compose.DotProp=Types;var index$2=compose,Composed=index$2({extend:!0}),FactoryChain=function(t){function e(e){t.call(this,e),this.data={},this.factory(),t.prototype.extend.call(this,["optional","required","chainUpDown"]).set("chainLength",0),this._calls=new ChainedSet_1(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.chainUpDowns=function(t){var e=this;return t.forEach(function(t){e[t]=function(r,n,o,i,s){return e.end(),e.parent[t](r,n,o,i,s)}}),this},e.prototype.props=function(t){var e=this;return t.forEach(function(t){return e.prop(t)}),this},e.prototype.onDone=function(t){return this.set("onDone",t)},e.prototype.prop=function(t,e){var r=this;return void 0===e&&(e=null),this.tap("chainLength",function(t){return t+1}),void 0!==this[t]&&!0===this.has("chainUpDown")?(this.end(),this.get("chainUpDown")()[t](e)):(this[t]=function(n){return null===e?r.data[t]=n:e(n),r._calls.add(t),r._calls.length===r.get("chainLength")?r.end():r},this)},e.prototype.getData=function(t){return void 0===t&&(t=null),null===t?this.data:this.data[t]},e.prototype.factory=function(t){var e=this;return void 0===t&&(t={}),this.end=function(r){if(void 0!==t.end){var n=t.end(e.data,e.parent,e,r);if(n&&n!==e)return n}else if(e.has("onDone")){var o=e.get("onDone")(e.data,e.parent,e,r);if(o&&o!==e)return o}return e.parent},this},e}(Composed),FactoryChain_1=FactoryChain,exp=index$2();exp.init=function(t){return new exp(t)},exp.Chain=exp,exp.compose=index$2,exp.traverse=traverse_1,exp.toArr=toArr,exp.camelCase=toArr,exp.dot=dotProp,exp.Chainable=Chainable_1,exp.ChainedSet=ChainedSet_1,exp.ChainedMap=ChainedMap_1,exp.FactoryChain=FactoryChain_1,exp.MergeChain=MergeChain_1,exp.dopemerge=dopemerge_1;var index=exp;export default index;
